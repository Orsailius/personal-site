var p=Object.defineProperty;var m=(n,i,e)=>i in n?p(n,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[i]=e;var r=(n,i,e)=>(m(n,typeof i!="symbol"?i+"":i,e),e);import{p as g}from"./MovingPlatform.57782d40.js";const o=[{id:0,image:"/images/aipaint/woman-6991826_640.png",colouredImages:["/images/aipaint/Woman0.png","/images/aipaint/Woman1.png","/images/aipaint/Woman2.png","/images/aipaint/Woman3.png","/images/aipaint/Woman4.png","/images/aipaint/Woman5.png"]},{id:1,image:"/images/aipaint/sunflower-2507845_640.png",colouredImages:["/images/aipaint/Sunflower0.png","/images/aipaint/Sunflower1.png","/images/aipaint/Sunflower2.png","/images/aipaint/Sunflower3.png","/images/aipaint/Sunflower4.png","/images/aipaint/Sunflower5.png"]},{id:2,image:"/images/aipaint/griffin-4018762_640.jpg",colouredImages:["/images/aipaint/Griffin0.png","/images/aipaint/Griffin1.png","/images/aipaint/Griffin2.png","/images/aipaint/Griffin3.png","/images/aipaint/Griffin4.png","/images/aipaint/Griffin5.png"]},{id:3,image:"/images/aipaint/vortex-5273023_640.jpg",colouredImages:["/images/aipaint/Vortex0.png","/images/aipaint/Vortex1.png","/images/aipaint/Vortex2.png","/images/aipaint/Vortex3.png","/images/aipaint/Vortex4.png","/images/aipaint/Vortex5.png"]},{id:4,image:"/images/aipaint/female-eye-7517981_640.png",colouredImages:["/images/aipaint/Eye0.png","/images/aipaint/Eye1.png","/images/aipaint/Eye2.png","/images/aipaint/Eye3.png","/images/aipaint/Eye4.png","/images/aipaint/Eye5.png"]},{id:5,image:"/images/aipaint/art-nouveau-5310890_640.png",colouredImages:["/images/aipaint/Peacocks0.png","/images/aipaint/Peacocks1.png","/images/aipaint/Peacocks2.png","/images/aipaint/Peacocks3.png","/images/aipaint/Peacocks4.png","/images/aipaint/Peacocks5.png"]}];class d extends g.Scene{constructor(){super(...arguments);r(this,"brushId",5);r(this,"imageId",0);r(this,"layers",[]);r(this,"lineDrawing");r(this,"needsUpdate",!1)}preload(){this.load.image("brush","/images/aipaint/brush1.png");let e=o[this.imageId];this.load.image(this.imageId+"lineart",e.image),console.log("loading "+this.imageId+"lineart");for(var a=0;a<6;a++)this.load.image(this.imageId+"coloured"+a,e.colouredImages[a])}loadLineArt(){const e=this.imageId+"lineart";this.load.image(e,o[this.imageId].image),this.load.once(Phaser.Loader.Events.COMPLETE,()=>{this.lineDrawing.setTexture(e)}),this.load.start()}loadColouredArt(){for(var e=0;e<6;e++){const a=this,t=a.imageId+"coloured"+e;a.load.image(t,o[a.imageId].colouredImages[e]),a.load.once(Phaser.Loader.Events.COMPLETE,()=>{if(a.layers[e]!=null){if(a.layers[e].colouredImage==null){let s=a.layers[e].colouredImage=this.add.image(400,400,this.imageId+"coloured"+e);s.displayWidth=800,s.displayHeight=800,s.setMask(a.layers[e].mask),s.depth=e}a.layers[e].colouredImage.setTexture(t)}}),a.load.start()}}createImages(){for(var e=0;e<6;e++){let a=this.add.renderTexture(400,400,800,800);a.setBlendMode(g.BlendModes.MULTIPLY);let t=a.createBitmapMask(),s=this.add.image(400,400,this.imageId+"coloured"+e);s.displayWidth=800,s.displayHeight=800,s.setMask(t),s.depth=e,this.layers.push({renderTexture:a,mask:t,colouredImage:s})}this.lineDrawing=this.add.image(400,400,this.imageId+"lineart"),this.lineDrawing.depth=-1,this.lineDrawing.displayWidth=800,this.lineDrawing.displayHeight=800}create(){this.createImages(),this.input.on("pointermove",e=>{if(e.isDown)for(var a=0;a<6;a++)a!=this.brushId||this.layers[this.brushId].renderTexture.draw("brush",e.x-32,e.y-32)},this)}setBrush(e){this.brushId=e;for(var a=0;a<6;a++)a!=e&&(this.layers[a].renderTexture.active=!1);console.log("Brush Id is now: "+this.brushId)}setImage(e){this.imageId=e,this.loadLineArt(),this.loadColouredArt()}clear(){for(var e=0;e<6;e++){let a=this.layers[e];a.renderTexture.destroy(),a.mask.destroy();let t=this.add.renderTexture(400,400,800,800);t.setBlendMode(g.BlendModes.MULTIPLY);let s=t.createBitmapMask();a.colouredImage.setMask(s),a.mask=s,a.renderTexture=t}}update(){}}function l(){return new d}const u={type:Phaser.AUTO,width:800,height:800,parent:"phaser",scene:[l()],physics:{default:"arcade"},render:{pixelArt:!1,antialias:!0},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,fullscreenTarget:"app",expandParent:!1},mipmapFilter:"LINEAR_MIPMAP_LINEAR"};class f extends Phaser.Game{constructor(i){super(i)}setBrush(i){this.scene.scenes[0].setBrush(i)}setImage(i){this.scene.scenes[0].setImage(i)}clear(){this.scene.scenes[0].clear()}}export{f as Game,u as GameConfig};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQUlQYWludEdhbWUuYTY0Yjg1ZTEuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvcGhhc2VyL0FJUGFpbnRTY2VuZS50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvcGhhc2VyL0FJUGFpbnRHYW1lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAncGhhc2VyJ1xyXG5pbXBvcnQgeyBCbGVuZE1vZGVzLCBTY2VuZSB9IGZyb20gJ3BoYXNlcic7XHJcbmltcG9ydCB7IFRleHRCdXR0b24gfSBmcm9tICcuL1RleHRCdXR0b24nO1xyXG5pbXBvcnQgTW92aW5nUGxhdGZvcm0gZnJvbSAnLi9Nb3ZpbmdQbGF0Zm9ybSc7XHJcblxyXG5leHBvcnQgY29uc3QgZ2FtZVNjZW5lS2V5ID0gJ0dhbWVTY2VuZSc7XHJcblxyXG5jb25zdCBpbWFnZXM6SW1hZ2VEYXRhW10gPSBbXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6MCxcclxuICAgICAgICBpbWFnZTpcIi9pbWFnZXMvYWlwYWludC93b21hbi02OTkxODI2XzY0MC5wbmdcIixcclxuICAgICAgICBjb2xvdXJlZEltYWdlczpbXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1dvbWFuMC5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvV29tYW4xLnBuZ1wiLFxyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9Xb21hbjIucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1dvbWFuMy5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvV29tYW40LnBuZ1wiLFxyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9Xb21hbjUucG5nXCIsXHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpZDoxLFxyXG4gICAgICAgIGltYWdlOlwiL2ltYWdlcy9haXBhaW50L3N1bmZsb3dlci0yNTA3ODQ1XzY0MC5wbmdcIixcclxuICAgICAgICBjb2xvdXJlZEltYWdlczpbXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1N1bmZsb3dlcjAucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1N1bmZsb3dlcjEucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1N1bmZsb3dlcjIucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1N1bmZsb3dlcjMucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1N1bmZsb3dlcjQucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1N1bmZsb3dlcjUucG5nXCIsXHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpZDoyLFxyXG4gICAgICAgIGltYWdlOlwiL2ltYWdlcy9haXBhaW50L2dyaWZmaW4tNDAxODc2Ml82NDAuanBnXCIsXHJcbiAgICAgICAgY29sb3VyZWRJbWFnZXM6W1xyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9HcmlmZmluMC5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvR3JpZmZpbjEucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L0dyaWZmaW4yLnBuZ1wiLFxyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9HcmlmZmluMy5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvR3JpZmZpbjQucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L0dyaWZmaW41LnBuZ1wiLFxyXG4gICAgICAgIF1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6MyxcclxuICAgICAgICBpbWFnZTpcIi9pbWFnZXMvYWlwYWludC92b3J0ZXgtNTI3MzAyM182NDAuanBnXCIsXHJcbiAgICAgICAgY29sb3VyZWRJbWFnZXM6W1xyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9Wb3J0ZXgwLnBuZ1wiLFxyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9Wb3J0ZXgxLnBuZ1wiLFxyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9Wb3J0ZXgyLnBuZ1wiLFxyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9Wb3J0ZXgzLnBuZ1wiLFxyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9Wb3J0ZXg0LnBuZ1wiLFxyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9Wb3J0ZXg1LnBuZ1wiLFxyXG4gICAgICAgIF1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6NCxcclxuICAgICAgICBpbWFnZTpcIi9pbWFnZXMvYWlwYWludC9mZW1hbGUtZXllLTc1MTc5ODFfNjQwLnBuZ1wiLFxyXG4gICAgICAgIGNvbG91cmVkSW1hZ2VzOltcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvRXllMC5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvRXllMS5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvRXllMi5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvRXllMy5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvRXllNC5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvRXllNS5wbmdcIixcclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGlkOjUsXHJcbiAgICAgICAgaW1hZ2U6XCIvaW1hZ2VzL2FpcGFpbnQvYXJ0LW5vdXZlYXUtNTMxMDg5MF82NDAucG5nXCIsXHJcbiAgICAgICAgY29sb3VyZWRJbWFnZXM6W1xyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9QZWFjb2NrczAucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1BlYWNvY2tzMS5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvUGVhY29ja3MyLnBuZ1wiLFxyXG4gICAgICAgICAgICBcIi9pbWFnZXMvYWlwYWludC9QZWFjb2NrczMucG5nXCIsXHJcbiAgICAgICAgICAgIFwiL2ltYWdlcy9haXBhaW50L1BlYWNvY2tzNC5wbmdcIixcclxuICAgICAgICAgICAgXCIvaW1hZ2VzL2FpcGFpbnQvUGVhY29ja3M1LnBuZ1wiLFxyXG4gICAgICAgIF1cclxuICAgIH0sXHJcbl07XHJcblxyXG5pbnRlcmZhY2UgSW1hZ2VEYXRhXHJcbntcclxuICAgIGlkOm51bWJlcixcclxuICAgIGltYWdlOnN0cmluZyxcclxuICAgIGNvbG91cmVkSW1hZ2VzOnN0cmluZ1tdXHJcbn1cclxuXHJcbmludGVyZmFjZSBMYXllclxyXG57XHJcbiAgICByZW5kZXJUZXh0dXJlOlBoYXNlci5HYW1lT2JqZWN0cy5SZW5kZXJUZXh0dXJlO1xyXG4gICAgbWFzazphbnk7XHJcbiAgICBjb2xvdXJlZEltYWdlOlBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZTtcclxufVxyXG5cclxuXHJcbmNsYXNzIEdhbWVTY2VuZSBleHRlbmRzIFNjZW5lXHJcbntcclxuICAgIGJydXNoSWQ6bnVtYmVyID0gNTtcclxuICAgIGltYWdlSWQ6bnVtYmVyID0gMDtcclxuICAgIGxheWVyczpMYXllcltdID0gW107XHJcbiAgICBsaW5lRHJhd2luZzpQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XHJcbiAgICBuZWVkc1VwZGF0ZTpib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJlbG9hZCgpIFxyXG4gICAge1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYnJ1c2gnLCAnL2ltYWdlcy9haXBhaW50L2JydXNoMS5wbmcnKTtcclxuICAgICAgICBsZXQgaW1hZ2UgPSBpbWFnZXNbdGhpcy5pbWFnZUlkXTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UodGhpcy5pbWFnZUlkICsgJ2xpbmVhcnQnLGltYWdlLmltYWdlKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImxvYWRpbmcgXCIgKyB0aGlzLmltYWdlSWQgKyAnbGluZWFydCcpXHJcbiAgICAgICAgZm9yKHZhciBpID0wOyBpIDwgNjtpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UodGhpcy5pbWFnZUlkICsgJ2NvbG91cmVkJyArIGksIGltYWdlLmNvbG91cmVkSW1hZ2VzW2ldKTtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBsb2FkTGluZUFydCgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5pbWFnZUlkICsgJ2xpbmVhcnQnO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShrZXksaW1hZ2VzW3RoaXMuaW1hZ2VJZF0uaW1hZ2UpO1xyXG4gICAgICAgIHRoaXMubG9hZC5vbmNlKFBoYXNlci5Mb2FkZXIuRXZlbnRzLkNPTVBMRVRFLCAoKSA9PiBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIHRleHR1cmUgbG9hZGVkIHNvIHVzZSBpbnN0ZWFkIG9mIHRoZSBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICB0aGlzLmxpbmVEcmF3aW5nLnNldFRleHR1cmUoa2V5KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMubG9hZC5zdGFydCgpXHJcbiAgICB9XHJcblxyXG4gICAgbG9hZENvbG91cmVkQXJ0KClcclxuICAgIHtcclxuICAgICAgICBmb3IodmFyIGkgPTA7IGkgPCA2O2krKylcclxuICAgICAgICB7ICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBUaGlzID0gdGhpcztcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gVGhpcy5pbWFnZUlkICsgJ2NvbG91cmVkJyArIGk7XHJcbiAgICAgICAgICAgIFRoaXMubG9hZC5pbWFnZShrZXksIGltYWdlc1tUaGlzLmltYWdlSWRdLmNvbG91cmVkSW1hZ2VzW2ldKTtcclxuICAgICAgICAgICAgVGhpcy5sb2FkLm9uY2UoUGhhc2VyLkxvYWRlci5FdmVudHMuQ09NUExFVEUsICgpID0+IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihUaGlzLmxheWVyc1tpXSA9PSBudWxsIClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihUaGlzLmxheWVyc1tpXS5jb2xvdXJlZEltYWdlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBpYyA9IFRoaXMubGF5ZXJzW2ldLmNvbG91cmVkSW1hZ2U9IHRoaXMuYWRkLmltYWdlKDQwMCwgNDAwLCB0aGlzLmltYWdlSWQgKyAnY29sb3VyZWQnICsgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGljLmRpc3BsYXlXaWR0aCA9IDgwMDtcclxuICAgICAgICAgICAgICAgICAgICBwaWMuZGlzcGxheUhlaWdodCA9IDgwMDtcclxuICAgICAgICAgICAgICAgICAgICBwaWMuc2V0TWFzayhUaGlzLmxheWVyc1tpXS5tYXNrKTtcclxuICAgICAgICAgICAgICAgICAgICBwaWMuZGVwdGg9aTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgXHJcbiAgICAgICAgICAgICAgICBUaGlzLmxheWVyc1tpXS5jb2xvdXJlZEltYWdlLnNldFRleHR1cmUoa2V5KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFRoaXMubG9hZC5zdGFydCgpO1xyXG4gICAgICAgIH0gICAgXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlSW1hZ2VzKClcclxuICAgIHtcclxuICAgICAgICBmb3IodmFyIGkgPTA7IGkgPDY7aSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHJ0ID0gdGhpcy5hZGQucmVuZGVyVGV4dHVyZSg0MDAsIDQwMCwgODAwLCA4MDApO1xyXG4gICAgICAgICAgICBydC5zZXRCbGVuZE1vZGUoQmxlbmRNb2Rlcy5NVUxUSVBMWSk7ICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IG1hc2sgPSBydC5jcmVhdGVCaXRtYXBNYXNrKCk7XHJcbiAgICAgICAgICAgIGxldCBwaWMgPSB0aGlzLmFkZC5pbWFnZSg0MDAsIDQwMCwgdGhpcy5pbWFnZUlkICsgJ2NvbG91cmVkJyArIGkpO1xyXG4gICAgICAgICAgICBwaWMuZGlzcGxheVdpZHRoID0gODAwO1xyXG4gICAgICAgICAgICBwaWMuZGlzcGxheUhlaWdodCA9IDgwMDtcclxuICAgICAgICAgICAgcGljLnNldE1hc2sobWFzayk7XHJcbiAgICAgICAgICAgIHBpYy5kZXB0aD1pO1xyXG4gICAgICAgICAgICB0aGlzLmxheWVycy5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclRleHR1cmU6cnQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFzazptYXNrLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG91cmVkSW1hZ2U6cGljXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxpbmVEcmF3aW5nID0gdGhpcy5hZGQuaW1hZ2UoNDAwLCA0MDAsIHRoaXMuaW1hZ2VJZCArJ2xpbmVhcnQnKTtcclxuICAgICAgICB0aGlzLmxpbmVEcmF3aW5nLmRlcHRoID0gLTE7XHJcbiAgICAgICAgdGhpcy5saW5lRHJhd2luZy5kaXNwbGF5V2lkdGggPSA4MDA7XHJcbiAgICAgICAgdGhpcy5saW5lRHJhd2luZy5kaXNwbGF5SGVpZ2h0ID0gODAwO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZSgpIFxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlSW1hZ2VzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXQub24oJ3BvaW50ZXJtb3ZlJywgcG9pbnRlciA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHBvaW50ZXIuaXNEb3duKVxyXG4gICAgICAgICAgICB7ICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDtpIDwgNjtpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaSAhPSB0aGlzLmJydXNoSWQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMucmVuZGVyVGV4dHVyZXNbdGhpcy5icnVzaElkXS5lcmFzZSgnYnJ1c2gnLCBwb2ludGVyLnggLSAzMiwgcG9pbnRlci55IC0gMzIsMCk7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXllcnNbdGhpcy5icnVzaElkXS5yZW5kZXJUZXh0dXJlLmRyYXcoJ2JydXNoJywgcG9pbnRlci54IC0gMzIsIHBvaW50ZXIueSAtIDMyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICB9ICAgICAgXHJcblxyXG4gICAgc2V0QnJ1c2goYnJ1c2hJZDpudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5icnVzaElkID0gYnJ1c2hJZDtcclxuICAgICAgICBmb3IodmFyIGk9MDtpIDwgNjtpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihpICE9IGJydXNoSWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXJzW2ldLnJlbmRlclRleHR1cmUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJCcnVzaCBJZCBpcyBub3c6IFwiICsgdGhpcy5icnVzaElkKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbWFnZShpbWFnZUlkOm51bWJlcilcclxuICAgIHtcclxuICAgICAgICB0aGlzLmltYWdlSWQgPSBpbWFnZUlkO1xyXG4gICAgICAgIHRoaXMubG9hZExpbmVBcnQoKTtcclxuICAgICAgICB0aGlzLmxvYWRDb2xvdXJlZEFydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKClcclxuICAgIHtcclxuICAgICAgICBmb3IodmFyIGk9MDtpIDwgNjtpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgbGF5ZXIgPSB0aGlzLmxheWVyc1tpXTtcclxuICAgICAgICAgICAgbGF5ZXIucmVuZGVyVGV4dHVyZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGxheWVyLm1hc2suZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBsZXQgcnQgPSB0aGlzLmFkZC5yZW5kZXJUZXh0dXJlKDQwMCwgNDAwLCA4MDAsIDgwMCk7XHJcbiAgICAgICAgICAgIHJ0LnNldEJsZW5kTW9kZShCbGVuZE1vZGVzLk1VTFRJUExZKTsgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgbWFzayA9IHJ0LmNyZWF0ZUJpdG1hcE1hc2soKTtcclxuICAgICAgICAgICAgbGF5ZXIuY29sb3VyZWRJbWFnZS5zZXRNYXNrKG1hc2spO1xyXG4gICAgICAgICAgICBsYXllci5tYXNrID0gbWFzaztcclxuICAgICAgICAgICAgbGF5ZXIucmVuZGVyVGV4dHVyZSA9IHJ0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKVxyXG4gICAge1xyXG4gICAgICAgXHJcbiAgICB9XHJcbn0gICBcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2FtZVNjZW5lKCk6IFBoYXNlci5UeXBlcy5TY2VuZXMuU2V0dGluZ3NDb25maWcgfCBQaGFzZXIuVHlwZXMuU2NlbmVzLkNyZWF0ZVNjZW5lRnJvbU9iamVjdENvbmZpZyBcclxue1xyXG4gICAgcmV0dXJuIG5ldyBHYW1lU2NlbmUoKTtcclxufSIsImltcG9ydCAncGhhc2VyJztcclxuaW1wb3J0IHsgZ2FtZVNjZW5lIH0gZnJvbSAnLi9BSVBhaW50U2NlbmUnO1xyXG5cclxuZXhwb3J0IGNvbnN0IEdhbWVDb25maWc6IFBoYXNlci5UeXBlcy5Db3JlLkdhbWVDb25maWcgPSBcclxue1xyXG4gICAgdHlwZTogUGhhc2VyLkFVVE8sXHJcbiAgICB3aWR0aDogODAwLFxyXG4gICAgaGVpZ2h0OiA4MDAsXHJcbiAgICBwYXJlbnQ6XCJwaGFzZXJcIixcclxuICAgIHNjZW5lOiBbZ2FtZVNjZW5lKCldIGFzIFBoYXNlci5UeXBlcy5TY2VuZXMuU2V0dGluZ3NDb25maWdbXSwgICAgXHJcbiAgICBwaHlzaWNzOiB7XHJcbiAgICAgIGRlZmF1bHQ6ICdhcmNhZGUnLFxyXG4gICAgfSxcclxuICAgIHJlbmRlcjogeyBwaXhlbEFydDogZmFsc2UsIGFudGlhbGlhczogdHJ1ZSB9LFxyXG4gICAgc2NhbGU6IHtcclxuICAgICAgbW9kZTogUGhhc2VyLlNjYWxlLkZJVCxcclxuICAgICAgYXV0b0NlbnRlcjogUGhhc2VyLlNjYWxlLkNFTlRFUl9CT1RILFxyXG4gICAgICAvLyBgZnVsbHNjcmVlblRhcmdldGAgbXVzdCBiZSBkZWZpbmVkIGZvciBwaG9uZXMgdG8gbm90IGhhdmVcclxuICAgICAgLy8gYSBzbWFsbCBtYXJnaW4gZHVyaW5nIGZ1bGxzY3JlZW4uXHJcbiAgICAgIGZ1bGxzY3JlZW5UYXJnZXQ6ICdhcHAnLFxyXG4gICAgICBleHBhbmRQYXJlbnQ6IGZhbHNlLFxyXG4gICAgfSxcclxuICAgIG1pcG1hcEZpbHRlcjogJ0xJTkVBUl9NSVBNQVBfTElORUFSJyxcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lIGV4dGVuZHMgUGhhc2VyLkdhbWUge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnOiBQaGFzZXIuVHlwZXMuQ29yZS5HYW1lQ29uZmlnKSB7XHJcbiAgICAgIHN1cGVyKGNvbmZpZyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QnJ1c2goaWQ6bnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAodGhpcy5zY2VuZS5zY2VuZXNbMF0gYXMgYW55KS5zZXRCcnVzaChpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW1hZ2UoaWQ6bnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAodGhpcy5zY2VuZS5zY2VuZXNbMF0gYXMgYW55KS5zZXRJbWFnZShpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKVxyXG4gICAge1xyXG4gICAgICAodGhpcy5zY2VuZS5zY2VuZXNbMF0gYXMgYW55KS5jbGVhcigpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuIl0sIm5hbWVzIjpbImltYWdlcyIsIkdhbWVTY2VuZSIsIlNjZW5lIiwiX19wdWJsaWNGaWVsZCIsImltYWdlIiwiaSIsImtleSIsIlRoaXMiLCJwaWMiLCJydCIsIkJsZW5kTW9kZXMiLCJtYXNrIiwicG9pbnRlciIsImJydXNoSWQiLCJpbWFnZUlkIiwibGF5ZXIiLCJnYW1lU2NlbmUiLCJHYW1lQ29uZmlnIiwiR2FtZSIsImNvbmZpZyIsImlkIl0sIm1hcHBpbmdzIjoieU5BT0EsTUFBTUEsRUFBcUIsQ0FDdkIsQ0FDSSxHQUFHLEVBQ0gsTUFBTSx3Q0FDTixlQUFlLENBQ1gsNkJBQ0EsNkJBQ0EsNkJBQ0EsNkJBQ0EsNkJBQ0EsNEJBQ0osQ0FDSixFQUNBLENBQ0ksR0FBRyxFQUNILE1BQU0sNENBQ04sZUFBZSxDQUNYLGlDQUNBLGlDQUNBLGlDQUNBLGlDQUNBLGlDQUNBLGdDQUNKLENBQ0osRUFDQSxDQUNJLEdBQUcsRUFDSCxNQUFNLDBD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
